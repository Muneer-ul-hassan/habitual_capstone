{% extends 'habits/base.html' %}

{% block title %}Log Mood - Habitual{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-header">
        <h2><i class="fas fa-smile"></i> How are you feeling today?</h2>
        <p class="form-subtitle">Track your daily mood to understand patterns and correlations</p>
    </div>
    
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}
        
        <div class="mood-selector">
            <div class="mood-options">
                <div class="mood-option" data-value="1">
                    <div class="mood-emoji">😢</div>
                    <span>Very Unhappy</span>
                </div>
                <div class="mood-option" data-value="2">
                    <div class="mood-emoji">😔</div>
                    <span>Unhappy</span>
                </div>
                <div class="mood-option" data-value="3">
                    <div class="mood-emoji">😐</div>
                    <span>Neutral</span>
                </div>
                <div class="mood-option" data-value="4">
                    <div class="mood-emoji">😊</div>
                    <span>Happy</span>
                </div>
                <div class="mood-option" data-value="5">
                    <div class="mood-emoji">😄</div>
                    <span>Very Happy</span>
                </div>
            </div>
            <input type="hidden" name="mood" id="mood-input" required>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Log Mood
            </button>
            <a href="{% url 'habits:index' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const moodOptions = document.querySelectorAll('.mood-option');
    const moodInput = document.getElementById('mood-input');
    
    moodOptions.forEach(option => {
        option.addEventListener('click', function() {
            // Remove active class from all options
            moodOptions.forEach(opt => opt.classList.remove('active'));
            
            // Add active class to clicked option
            this.classList.add('active');
            
            // Set the value in hidden input
            moodInput.value = this.dataset.value;
        });
    });
});
</script>
{% endblock %}